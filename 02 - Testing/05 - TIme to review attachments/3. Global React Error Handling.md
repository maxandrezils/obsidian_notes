Implement a global error handling mechanism for all API requests made through the frontend. This system should catch and manage HTTP and network errors (e.g. 401, 403, 500), and display appropriate feedback to the user via toast notifications or inline error messaging.

#### **Scope of Work**

1. **Integrate Error Interceptors in API Layer**
    
    1. configure a global interceptor in the API client
        
2. **Standardise Error Format**
    
    1. Standardise the structure of errors (status code, message) to simplify downstream handling.
        
    2. Handle Django REST default error format (`{"detail": "...message..."}` or field-level errors).
        
3. **Global Error Display System**
    
    - Integrate a toast notification library
        
    - Toasts used for application level errors:
        
        - **400/404** → “There was an error retrieving data, please try again”
            
    - Pages used for network or auth level errors
        
        - **401/403** → “You are not authorised. Please log in.”
            
        - **500** → “Something went wrong. Please try again later.”
            
        - **Network errors** → “Network issue. Check your connection.”


| Acceptance Criteria                                                                                                                                                       | Scenario                                                                                                                                                                  | Expected Result                                                                                                      | Screenshot | Status |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------- | ---------- | ------ |
| An Expired session or an invalid session should return a 401/403 error                                                                                                    | When a session is expired (this can be triggered by expiring the token and making a request)the Error framework should respond accordingly                                | The toast should display **401/403** → “You are not authorised. Please log in.”                                      |            |        |
| Server crash / 500 error                                                                                                                                                  | If there is an error that is not covered by the others or the server crashes, the error framework should respond accordingly                                              | The toast should display **500** → “Something went wrong. Please try again later.”                                   |            |        |
| If eMR is not available when the request is made (offline/being deployed etc) a **400/404** → “There was an error retrieving data, please try again” should be displayed. | If eMR is not available when the request is made (offline/being deployed etc) a **400/404** → “There was an error retrieving data, please try again” should be displayed. | The toast should display a **400/404** → “There was an error retrieving data, please try again” should be displayed. |            |        |
| If there are network errors, an error should be displayedq                                                                                                                | Use dev tools to disable the network and make a request                                                                                                                   | The toast should display a **Network errors** → “Network issue. Check your connection.”                              |            |        |
